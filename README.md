# 文件交易流程

### 前提条件

所有用户都需要拥有自己的 EOS 账户，否则无法使用该平台，登录方式目前仅限 Scatter，用户需自行下载 Scatter Desktop 并链接到自己的账户。进入该平台后，页面将自动弹窗询问 Scatter 的授权，成功授权后前端会记住你的账户，直到你手动注销。

> 注：Scatter Desktop 建议下载 11.0.1 版本的，新版有时会出一堆莫名其妙的bug。

### 消费者视角：

消费者在平台上购买文件共有两种方式，具体如下：

1. 直接向卖家转账，并在 `memo` 中填写文件对应的 ID。

该方式存在一定风险，首先，`memo` 信息及卖家账号必须准确填写，并且转账金额必须大于等于文件售价，否则该交易将不被认可，转的代币也要不回来的；其次，如有多位买家同时竞争该文件，那么合约将偏向于已经下了订单的用户，你的钱同样是白交的；还有一点就是，有些恶意的卖家也许会在你转账的一瞬间修改定价，导致交易失败，空手套白狼，这也是有可能的。

2. 先下订单再转账。

该方式的优势在于：如果存在多位买家同时抢购同一文件的情况下，合约会优先选择先下订单的用户并完成交易，如果没有抢到下单权的话则不会触发转账；另外，最终的交易额也将以订单为准，而非当前浮动的价格。（交易完成后订单将会自动删除）

***

交易成功后，文件将自动解除上架状态（避免刚买到手又被人买走了），用户可在此期间下载文件或修改其相关信息，如果用户愿意的话，可将该文件以不同的定价再次上架售卖。

### 卖家视角：

卖家将文件上架售卖一共需要做如下几步：

1. 将文件上传至 IPFS，并获取返回的 CID。

用户可自行下载 IPFS Desktop，然后启动本地节点并上传文件，如果嫌麻烦的话，平台本身也提供了上传文件所需的工具，用户可直接前往 Dashboard 进行该操作。以 Dashboard 中的 IPFS Upload 工具为例，上传成功后，用户可在下方找到该文件对应的 CID，注意：任何人都可以通过该 CID 下载其对应的文件，请妥善保管。

2. 发布文件。

用户可在 Publish File 窗口中填写文件的相关信息，包括 CID、描述、售价等等，填写完成后点击发布即可。需要注意的是，如果 IPFS 上已存在该文件（即 CID 重合），那么该操作将不被允许。

3. 等着收钱。

***

对于卖家而言，整个交易流程是不需要人为介入的，也就是说，要是卖家突然发现自己的余额上去了，或者自己上架的文件突然消失了，就说明交易完成了，卖家可在 Recent Transactions 窗口中查看近期交易的详细信息。
